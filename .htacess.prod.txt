


RewriteEngine On

# Redireccionar HTTP a HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [NE,L,R=301]

# Forzar el uso de www en el dominio
RewriteCond %{HTTP_HOST} !^www\.lyvenergy\.com$
RewriteRule ^(.*)$ https://www.lyvenergy.com/$1 [NE,L,R=301]

# Redireccionar URLs con barra final a URLs sin barra final
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*/)([^/]+)$ /$1 [NE,L,R=301]
RewriteRule ^(.*/)([^/]+)/$ /$1 [NE,L]

<IfModule mod_headers.c>
    Header unset X-Powered-By

    # Habilitar CORS para recursos compartidos
    Header set Access-Control-Allow-Origin "*"

    # Configurar caché del navegador
    <FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|swf)$">
        Header set Cache-Control "max-age=2592000, public"
    </FilesMatch>

    <FilesMatch "\.(html|htm|php)$">
        Header set Cache-Control "max-age=7200, private, must-revalidate"
    </FilesMatch>

    # Habilitar compresión Gzip
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json application/xml

    # Configurar la seguridad
    Header always set X-Content-Type-Options "nosniff"
    Header always set X-XSS-Protection "1; mode=block"
    Header always set X-Frame-Options "SAMEORIGIN"
</IfModule>

# Evitar el listado de directorios
Options -Indexes

# Redirigir 404 a una página personalizada
ErrorDocument 404 /404.html

# Configurar reglas de redireccionamiento de errores
ErrorDocument 403 /403.html
ErrorDocument 500 /500.html
